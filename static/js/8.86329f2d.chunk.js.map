{"version":3,"sources":["tools/getArticleByHash.js","components/article/sass/detail.module.scss","pages/article/detail.js"],"names":["getArticleByHash","type","hash","BLOGTYPE","article","ARTICLE","find","e","know","KNOW","translate","TRANSLATE","Error","module","exports","hasListener","Detaile","props","history","match","params","useState","articleItem","fixed","setFixed","detail","setDetail","useEffect","Axios","get","filePath","fileName","responseEncoding","then","res","data","Prism","highlightAll","scrollLienter","window","scrollY","resizeLienter","document","documentElement","clientWidth","addEventListener","removeEventListener","className","styles","box","title","dangerouslySetInnerHTML","__html","marked","loading","back","onClick","goBack"],"mappings":"2IAmBeA,MAdf,SAA0BC,EAAMC,GAC9B,OAAQD,GACN,KAAKE,IAASC,QACZ,OAAOC,IAAQC,MAAK,SAAAC,GAAC,OAAIA,EAAEL,OAASA,KACtC,KAAKC,IAASK,KACZ,OAAOC,IAAKH,MAAK,SAAAC,GAAC,OAAIA,EAAEL,OAASA,KACnC,KAAKC,IAASO,UACZ,OAAOC,IAAUL,MAAK,SAAAC,GAAC,OAAIA,EAAEL,OAASA,KACxC,QACE,IAAIU,MAAM,uD,mBCbhBC,EAAOC,QAAU,CAAC,IAAM,oBAAoB,MAAQ,sBAAsB,QAAU,wBAAwB,MAAQ,sBAAsB,KAAO,qBAAqB,QAAU,0B,qJCO5KC,GAAc,EA2DHC,UAzDf,SAAiBC,GACf,IAAQC,EAA+CD,EAA/CC,QAAR,EAAuDD,EAAtCE,MAASC,OAAUnB,EAApC,EAAoCA,KAAMC,EAA1C,EAA0CA,KAC1C,EAAsBmB,oBAAS,kBAAMrB,YAAiBC,EAAMC,MAArDoB,EAAP,oBACA,EAA0BD,oBAAS,GAAnC,mBAAOE,EAAP,KAAcC,EAAd,KACA,EAA4BH,mBAAS,IAArC,mBAAOI,EAAP,KAAeC,EAAf,KAsCA,OApCAC,qBAAU,WACRC,IAAMC,IAAN,UAAaP,EAAYQ,UAAzB,OAAoCR,EAAYS,UAAY,CAC1DC,iBAAkB,SACjBC,MAAK,SAAAC,GACNR,EAAUQ,EAAIC,MACdC,IAAMC,oBAEP,CAACf,IAEJK,qBAAU,WACR,SAASW,IACHC,OAAOC,SAAW,IAAOhB,GAAS,GAC/BA,GAAS,GAElB,SAASiB,IACHC,SAASC,gBAAgBC,YAAc,KACpC7B,IACHA,GAAc,EACdwB,OAAOM,iBAAiB,SAAUP,KAGpCvB,GAAc,EACdS,GAAS,GACTe,OAAOO,oBAAoB,SAAUR,IAMzC,OAHAC,OAAOM,iBAAiB,SAAUJ,GAClCA,IAEO,WACL1B,GAAc,EACdwB,OAAOO,oBAAoB,SAAUL,GACrCF,OAAOO,oBAAoB,SAAUR,MAEtC,IAGD,sBAAKS,UAAWC,IAAOC,IAAvB,UACE,oBAAIF,UAAS,UAAKxB,EAAQyB,IAAOzB,MAAQyB,IAAOE,OAAhD,SAA0D5B,EAAY4B,QACtE,0BAASH,UAAWC,IAAO5C,QAA3B,UACE,uBAEEqB,EAAS,qBAAK0B,wBAAyB,CAAEC,OAAQC,IAAO5B,MACtD,qBAAKsB,UAAWC,IAAOM,QAAvB,SAAgC,cAAC,IAAD,SAGtC,qBAAKP,UAAWC,IAAOO,KAAMC,QAAS,WAAQtC,EAAQuC","file":"static/js/8.86329f2d.chunk.js","sourcesContent":["import { BLOGTYPE, ARTICLE, KNOW, TRANSLATE } from \"../assets/static\"\r\n/** \r\n * type:文章类型。\r\n * hash:文章hash值 \r\n */\r\nfunction getArticleByHash(type, hash) {\r\n  switch (type) {\r\n    case BLOGTYPE.article:\r\n      return ARTICLE.find(e => e.hash === hash)\r\n    case BLOGTYPE.know:\r\n      return KNOW.find(e => e.hash === hash)\r\n    case BLOGTYPE.translate:\r\n      return TRANSLATE.find(e => e.hash === hash)\r\n    default:\r\n      new Error(\"文章详情类型出错\")\r\n      break;\r\n  }\r\n}\r\n\r\nexport default getArticleByHash","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"detail_box__3EfYj\",\"title\":\"detail_title__3YouO\",\"article\":\"detail_article__3DU19\",\"fixed\":\"detail_fixed__1A2hl\",\"back\":\"detail_back__3L2Jv\",\"loading\":\"detail_loading__22pkQ\"};","import { useEffect, useState } from \"react\"\r\nimport Axios from 'axios'\r\nimport marked from 'marked'\r\nimport Prism from 'prismjs'\r\nimport styles from '../../components/article/sass/detail.module.scss'\r\nimport { getArticleByHash } from \"../../tools\"\r\nimport { Loading } from '../../components/common'\r\n\r\nlet hasListener = false\r\n\r\nfunction Detaile(props) {\r\n  const { history, match: { params: { type, hash } } } = props\r\n  const [articleItem] = useState(() => getArticleByHash(type, hash))\r\n  const [fixed, setFixed] = useState(false)\r\n  const [detail, setDetail] = useState(\"\")\r\n  // 测试请求博客文章\r\n  useEffect(() => {\r\n    Axios.get(`${articleItem.filePath}${articleItem.fileName}`, {\r\n      responseEncoding: 'utf8',\r\n    }).then(res => {\r\n      setDetail(res.data)\r\n      Prism.highlightAll()\r\n    })\r\n  }, [articleItem])\r\n\r\n  useEffect(() => {\r\n    function scrollLienter() {\r\n      if (window.scrollY >= 100) { setFixed(true) }\r\n      else { setFixed(false) }\r\n    }\r\n    function resizeLienter() {\r\n      if (document.documentElement.clientWidth > 1200) {\r\n        if (!hasListener) {\r\n          hasListener = true\r\n          window.addEventListener('scroll', scrollLienter)\r\n        }\r\n      } else {\r\n        hasListener = false\r\n        setFixed(false)\r\n        window.removeEventListener('scroll', scrollLienter)\r\n      }\r\n    }\r\n    window.addEventListener('resize', resizeLienter)\r\n    resizeLienter()\r\n\r\n    return () => {\r\n      hasListener = false\r\n      window.removeEventListener('resize', resizeLienter)\r\n      window.removeEventListener('scroll', scrollLienter)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className={styles.box}>\r\n      <h1 className={`${fixed ? styles.fixed : styles.title}`}>{articleItem.title}</h1>\r\n      <article className={styles.article}>\r\n        <hr></hr>\r\n        {\r\n          detail ? <div dangerouslySetInnerHTML={{ __html: marked(detail) }}></div> :\r\n            <div className={styles.loading}><Loading /></div>\r\n        }\r\n      </article>\r\n      <div className={styles.back} onClick={() => { history.goBack() }}></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Detaile"],"sourceRoot":""}